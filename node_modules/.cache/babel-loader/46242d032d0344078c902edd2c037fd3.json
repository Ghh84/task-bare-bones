{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gheri\\\\OneDrive\\\\Desktop\\\\Job related\\\\choicely\\\\task-bare-bones\\\\src\\\\components\\\\stops\\\\tableComponent\\\\tableBody.jsx\";\nimport React, { Component } from 'react';\nimport _ from 'lodash';\nimport moment from 'moment';\n\nclass TableBody extends Component {\n  constructor() {\n    super(...arguments);\n\n    this.renderCell = (stopInfo, column) => {\n      if (column.refId === 'time') {\n        return new Date(_.get(stopInfo, column.path) * 1000).toISOString().substr(11, 5);\n      }\n\n      if (column.refId === 'delay') {\n        const realDeparture = _.get(stopInfo, column.path[0]) * 1000;\n        const sheduledDeparture = _.get(stopInfo, column.path[1]) * 1000;\n        return this.calDelyedTime(realDeparture, sheduledDeparture);\n      }\n\n      if (column.refId === 'dueIn') {\n        const departureDate = new Date(_.get(stopInfo, column.path) * 1000).toISOString().substr(11, 8);\n        return this.calWaitTime(departureDate);\n      }\n\n      return _.get(stopInfo, column.path);\n    };\n\n    this.calWaitTime = departureDate => {\n      var today = new Date();\n      var currentDate = today.getHours() + ':' + today.getMinutes() + ':' + today.getSeconds();\n      var startTime = moment(currentDate, 'HH:mm:ss');\n      var endTime = moment(departureDate, 'HH:mm:ss');\n      var min = moment.utc(endTime.diff(startTime)).format('mm');\n      return [min] + ' ' + 'min';\n    };\n\n    this.calDelyedTime = (realDeparture, sheduledDeparture) => {\n      const timeDiff = new Date(sheduledDeparture).getHours() * 60 + new Date(sheduledDeparture).getMinutes() - new Date(realDeparture).getHours() * 60 - new Date(realDeparture).getMinutes();\n      if (timeDiff === 0) return 'Ontime';\n      console.log(timeDiff);\n      if (timeDiff[0] == '-') return timeDiff + ' ' + 'Delayed';else return timeDiff + ' ' + 'Earlier';\n    };\n  }\n\n  render() {\n    const {\n      data,\n      columns\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"tbody\", {\n      id: \"tableBody\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }\n    }, data.map((stopInfo, index) => /*#__PURE__*/React.createElement(\"tr\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }\n    }, columns.map(column => /*#__PURE__*/React.createElement(\"td\", {\n      key: index + column.refId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 15\n      }\n    }, column.refId === 'delay' && this.renderCell(stopInfo, column) != '0 min' ? /*#__PURE__*/React.createElement(\"span\", {\n      id: \"delay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 19\n      }\n    }, this.renderCell(stopInfo, column)) : /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 19\n      }\n    }, this.renderCell(stopInfo, column)))))));\n  }\n\n}\n\nexport default TableBody;","map":{"version":3,"names":["React","Component","_","moment","TableBody","renderCell","stopInfo","column","refId","Date","get","path","toISOString","substr","realDeparture","sheduledDeparture","calDelyedTime","departureDate","calWaitTime","today","currentDate","getHours","getMinutes","getSeconds","startTime","endTime","min","utc","diff","format","timeDiff","console","log","render","data","columns","props","map","index"],"sources":["C:/Users/gheri/OneDrive/Desktop/Job related/choicely/task-bare-bones/src/components/stops/tableComponent/tableBody.jsx"],"sourcesContent":["import React, { Component } from 'react'\r\nimport _ from 'lodash'\r\nimport moment from 'moment'\r\n\r\nclass TableBody extends Component {\r\n  renderCell = (stopInfo, column) => {\r\n    if (column.refId === 'time') {\r\n      return new Date(_.get(stopInfo, column.path) * 1000)\r\n        .toISOString()\r\n        .substr(11, 5)\r\n    }\r\n    if (column.refId === 'delay') {\r\n      const realDeparture = _.get(stopInfo, column.path[0]) * 1000\r\n      const sheduledDeparture = _.get(stopInfo, column.path[1]) * 1000\r\n      return this.calDelyedTime(realDeparture, sheduledDeparture)\r\n    }\r\n\r\n    if (column.refId === 'dueIn') {\r\n      const departureDate = new Date(_.get(stopInfo, column.path) * 1000)\r\n        .toISOString()\r\n        .substr(11, 8)\r\n      return this.calWaitTime(departureDate)\r\n    }\r\n    return _.get(stopInfo, column.path)\r\n  }\r\n\r\n  calWaitTime = (departureDate) => {\r\n    var today = new Date()\r\n    var currentDate =\r\n      today.getHours() + ':' + today.getMinutes() + ':' + today.getSeconds()\r\n    var startTime = moment(currentDate, 'HH:mm:ss')\r\n    var endTime = moment(departureDate, 'HH:mm:ss')\r\n    var min = moment.utc(endTime.diff(startTime)).format('mm')\r\n    return [min] + ' ' + 'min'\r\n  }\r\n  calDelyedTime = (realDeparture, sheduledDeparture) => {\r\n    const timeDiff =\r\n      new Date(sheduledDeparture).getHours() * 60 +\r\n      new Date(sheduledDeparture).getMinutes() -\r\n      new Date(realDeparture).getHours() * 60 -\r\n      new Date(realDeparture).getMinutes()\r\n    if (timeDiff === 0) return 'Ontime'\r\n    console.log(timeDiff)\r\n    if (timeDiff[0] == '-') return timeDiff + ' ' + 'Delayed'\r\n    else return timeDiff + ' ' + 'Earlier'\r\n  }\r\n  render() {\r\n    const { data, columns } = this.props\r\n    return (\r\n      <tbody id=\"tableBody\">\r\n        {data.map((stopInfo, index) => (\r\n          <tr key={index}>\r\n            {columns.map((column) => (\r\n              <td key={index + column.refId}>\r\n                {column.refId === 'delay' &&\r\n                this.renderCell(stopInfo, column) != '0 min' ? (\r\n                  <span id=\"delay\">{this.renderCell(stopInfo, column)}</span>\r\n                ) : (\r\n                  <div>{this.renderCell(stopInfo, column)}</div>\r\n                )}\r\n              </td>\r\n            ))}\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    )\r\n  }\r\n}\r\n\r\nexport default TableBody\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}